<!-- templates/orders/seller_orders.html -->
{% extends 'base.html' %}
{% block content %}
<div class="max-w-6xl mx-auto p-6">
  <h2 class="text-2xl font-bold mb-6">Your Orders (as Seller)</h2>
  {% if orders %}
    <div class="space-y-4">
      {% for order in orders %}
        <div class="border rounded-lg p-4 bg-white shadow">
          <p><strong>Order #{{ order.id }}</strong> | {{ order.created_at|date:"M d, Y" }}</p>
          <p>Status: <span class="font-semibold">{{ order.get_status_display }}</span></p>
          <p>Buyer: {{ order.user.username }}</p>
          
          {% if order.status == 'confirmed' %}
            <div class="mt-3 space-x-2">
              <form method="POST" action="{% url 'orders:seller_confirm_order' order.id %}" class="inline">
                {% csrf_token %}
                <button type="submit" class="bg-green-600 text-white px-3 py-1 rounded">Confirm Order</button>
              </form>
              <form method="POST" action="{% url 'orders:seller_cancel_order' order.id %}" class="inline">
                {% csrf_token %}
                <button type="submit" class="bg-red-600 text-white px-3 py-1 rounded">Cancel Order</button>
              </form>
            </div>
          {% elif order.status == 'seller_confirmed' %}
            <form method="POST" action="{% url 'orders:mark_handover_ready' order.id %}" class="mt-3 inline">
              {% csrf_token %}
              <button type="submit" class="bg-amber-600 text-white px-3 py-1 rounded">Mark Ready for Handover</button>
            </form>
          {% elif order.status == 'handover_pending' %}
            <form method="POST" action="{% url 'orders:complete_order' order.id %}" class="mt-3 inline">
              {% csrf_token %}
              <button type="submit" class="bg-emerald-700 text-white px-3 py-1 rounded">Mark as Completed</button>
            </form>
          {% endif %}
        </div>
      {% endfor %}
    </div>
  {% else %}
    <p class="text-gray-600">No orders yet.</p>
  {% endif %}
</div>
{% endblock %}